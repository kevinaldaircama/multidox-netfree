<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>  
  <title>menú principal</title>  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>  
  <link rel="manifest" href="manifest.json" />  
  <meta name="theme-color" content="#121212" />  
  <link rel="icon" type="image/png" href="3440119_ico.png">  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />  
  <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js"></script>

  <style>
    #loaderOverlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: #000000cc;
      z-index: 3000;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .loader {
      border: 10px solid #f3f3f3;
      border-top: 10px solid #3498db;
      border-radius: 50%;
      width: 70px;
      height: 70px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Modo claro */
    body.light-mode {
      background-color: #f5f5f5;
      color: #111;
    }
    body.light-mode .sidebar {
      background-color: #e0e0e0;
    }
    body.light-mode .nav-link {
      color: #111;
    }
    body.light-mode .nav-link:hover {
      color: #0d6efd;
    }
    body.light-mode .dashboard-container {
      background-color: #fff;
      color: #000;
    }
    body.light-mode .credit-box {
      background-color: #dee2e6;
    }
    body.light-mode .queries-box {
      background-color: #f8d7da;
    }

    body {
      background-color: #111;
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
    }
    .dashboard-container { max-width: 1200px; margin: auto; padding: 1rem; }
    .header-section {
      background: linear-gradient(to right, #00223e, #3a6073);
      border-radius: 15px;
      text-align: center;
      padding: 2rem 1rem;
    }
    .header-section img { border-radius: 50%; width: 80px; }
    .credit-box, .queries-box {
      padding: 1rem;
      border-radius: 10px;
      margin-top: 1rem;
    }
    .credit-box { background-color: #202d3a; }
    .queries-box { background-color: #47222e; }
    .btn-credits, .btn-invite {
      background-color: #0d6efd;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 10px;
      margin: 1rem 0;
      display: inline-block;
      text-decoration: none;
    }
    .query-search {
      background-color: #222;
      padding: 1rem;
      border-radius: 10px;
      margin: 2rem 0;
    }
    .category-btn {
      background-color: #007bff;
      color: white;
      margin: 0.4rem;
      border: none;
      padding: 0.5rem 0.75rem;
      border-radius: 10px;
      display: inline-block;
      text-decoration: none;
    }
    .category-btn i { margin-right: 0.5rem; }
    .filter-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .footer {
      margin-top: 3rem;
      text-align: center;
      font-size: 0.85rem;
      color: #aaa;
    }

    .sidebar {
      position: fixed;
      top: 0; left: -260px;
      width: 250px; height: 100%;
      background-color: #1e1e1e;
      transition: left 0.3s;
      padding: 1rem;
      z-index: 2000;
    }
    .sidebar.active { left: 0; }
    .sidebar .nav-link {
      color: #fff;
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0.5rem 0;
      text-decoration: none;
    }
    .sidebar .nav-link:hover { color: #0d6efd; }
    .hamburger {
      font-size: 24px;
      cursor: pointer;
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 2100;
    }
    .toggle-switch {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 1rem;
      cursor: pointer;
    }
  </style>   
</head>      
<body>      
<div id="loaderOverlay"><div class="loader"></div></div>

  <div class="hamburger text-white">
    <i class="fas fa-bars" onclick="toggleSidebar()"></i>
  </div>

  <div class="sidebar" id="sidebar">
    <h6 class="text-primary">BARRA DE MENÚ</h6>
    <a href="index" class="nav-link"><i class="fas fa-home"></i> Inicio</a>
    <a href="convertidor" class="nav-link"><i class="fas fa-credit-card"></i>convertir créditos a soles</a>
    <a href="compartí créditos" class="nav-link"><i class="fas fa-credit-card"></i>enviar créditos</a>
    <a href="index" class="nav-link" onclick="cerrarSesion()"><i class="fas fa-sign-out-alt"></i> Cerrar sesión</a>
    <a href="referido" class="nav-link"><i class="fas fa-users"></i> Mis Referidos</a>
    <hr>
    <h6 class="text-primary">OUR FEATURES</h6>
    <div class="toggle-switch" onclick="toggleMode()" id="modeToggle">
      <i class="fas fa-sun text-warning" id="modeIcon"></i> <!-- Cambié el icono a sol para el modo claro -->
      <span id="modeText">Modo Claro</span>
    </div>
    <div class="mt-3"><a href="admin panel" class="btn btn-primary w-100">Acceso admin</a></div>
    <div class="mt-2"><a href="https://ejemplo.com/soporte" class="btn btn-primary w-100"><i class="fas fa-headset"></i> Soporte</a></div>
  </div>

  <div class="dashboard-container">
    <div class="header-section">
      <img src="https://www.w3schools.com/howto/img_avatar.png" alt="Avatar" />
      <p>Plan: <span class="text-warning" id="tipoPlan">FREE</span> | Tipo de Cuenta: <span class="text-info">Personal</span></p>
      <h1>KTT</h1>
      <h4 class="text-light">on search</h4>
      <p>Encuentra conexiones, construye historias: tu búsqueda comienza aquí.</p>
      <a href="planes" class="btn-credits">Comprar Créditos <i class="fas fa-coins"></i></a>
    </div>      
      
    <div class="row">      
      <div class="col-md-6 credit-box">      
        <h5>Saldo Total</h5>      
        <p id="saldoUsuario">$0.00 <span class="text-muted">saldo actual a la fecha</span></p>      
        <div class="progress"><div class="progress-bar bg-success" style="width:100%">Saldo</div></div>      
      </div>      
      <div class="col-md-6 queries-box">      
        <h5>Consultas Realizadas</h5>      
        <p>1000 <a href="#" class="text-white">ver historial</a></p>      
        <div class="progress"><div class="progress-bar bg-danger" style="width:90%"></div></div>      
      </div>      
    </div>      
      
    <div class="text-center mt-3">      
      <a href="referido.html" class="btn-invite"><i class="fas fa-user-plus"></i> Invitar Amigos</a>      
      <p class="text-muted">Comparte tu enlace de referidos y obtén créditos por su recarga</p>      
    </div>      
      
    <div class="query-search">    
  <label for="consultaInput">Consultas 2025</label>    
  <input type="text" id="consultaInput" class="form-control" placeholder="Buscar por nombre o tipo de consulta" />    
  <div class="filter-tags"><span class="badge bg-primary">Todos</span></div>    
  
  <!-- Resultados dinámicos -->  
  <div id="resultadosBusqueda" class="list-group mt-3"></div>  
</div>  
      
    <div class="mt-4">      
      <h5>Categorías Populares</h5>      
      <div>      
        <a href="api/consulta dni.html" class="category-btn"><i class="fas fa-user"></i>consulta dni</a>      
        <a href="api/consulta nombre.html" class="category-btn"><i class="fas fa-user"></i>consulta por nombre</a>      
        <a href="api/telefono.html" class="category-btn"><i class="fas fa-user"></i>consulta por número telefónico</a>      
        <a href="api/Yape fake.html" class="category-btn"><i class="fas fa-user"></i>yape fake</a>      
        <a href="api/c4 info.html" class="category-btn"><i class="fas fa-user"></i>generador c4</a>      
        <a href="api/sis.html" class="category-btn"><i class="fas fa-user"></i>seguro sis</a>      
        <a href="api/delitos.html" class="category-btn"><i class="fas fa-user"></i>antecedentes penales</a>      
        <a href="api/delitos.html" class="category-btn"><i class="fas fa-user"></i>antecedentes judiciales</a>      
     
      </div>      
    </div>      
      
    <div class="footer">      
      <p>© 2025 multidoxnetfree | todos los derechos reservados ©️</p>      
    </div>      
  </div>      
      
  <!-- Modal de Notificación -->      
  <div class="modal fade" id="modalNotificacion" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">      
    <div class="modal-dialog modal-dialog-centered">      
      <div class="modal-content">      
        <div class="modal-header">      
          <h5 class="modal-title" id="modalLabel"><i class="fas fa-bell text-warning"></i> Notificación</h5>      
        </div>      
        <div class="modal-body" id="contenidoNotificacion"></div>      
        <div class="modal-footer">      
          <button type="button" class="btn btn-primary w-100" data-bs-dismiss="modal">Aceptar</button>      
        </div>      
      </div>      
    </div>      
  </div>      
     
  <!-- Scripts -->      
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>      
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>      
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>      
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>      
      
<!-- SCRIPT COMPLETO (fragmento relevante actualizado) -->
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDFxkNJCVxwddZFsqPeXSdeYe87ExEdhQk",
    authDomain: "roddox-27e1b.firebaseapp.com",
    databaseURL: "https://roddox-27e1b-default-rtdb.firebaseio.com",
    projectId: "roddox-27e1b",
    storageBucket: "roddox-27e1b.firebasestorage.app",
    messagingSenderId: "108259944325",
    appId: "1:108259944325:web:4ffd0c6e7815822eb1c6ec",
    measurementId: "G-MBQ5X9PLF8"
  };
  
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.database();

  auth.onAuthStateChanged(user => {
    if (user) {
      const uid = user.uid;

      // ✅ MOSTRAR PLAN DESDE FIREBASE
      db.ref(`usuarios/${uid}/plan`).on('value', snapshot => {
        const plan = snapshot.val() || 'FREE';
        const tipoPlanEl = document.getElementById('tipoPlan');
        tipoPlanEl.innerText = plan;

        tipoPlanEl.classList.remove(
          'text-warning', 'text-info', 'text-danger', 'text-muted', 'text-primary', 'text-success'
        );

        if (plan === 'FREE') {
          tipoPlanEl.classList.add('text-warning');
        } else if (plan === 'BRONCE') {
          tipoPlanEl.classList.add('text-muted');
        } else if (plan === 'ORO') {
          tipoPlanEl.classList.add('text-info');
        } else if (plan === 'PREMIUM') {
          tipoPlanEl.classList.add('text-danger');
        } else if (plan === 'VIP') {
          tipoPlanEl.classList.add('text-primary');
        } else if (plan === 'DIAMANTE') {
          tipoPlanEl.classList.add('text-success');
        }
      });

      // ✅ SALDO ACTUAL
      db.ref(`usuarios/${uid}/comisionesTotales`).on('value', snapshot => {
        const creditos = parseFloat(snapshot.val()) || 0;
        document.getElementById('saldoUsuario').innerHTML =
          `$${creditos.toFixed(2)} <span class="text-muted">saldo actual a la fecha</span>`;
      });

      // ✅ NOTIFICACIÓN
      db.ref(`usuarios/${uid}/notificacionRecarga`).once('value').then(snapshot => {
        const data = snapshot.val();
        if (data && !data.leido) {
          document.getElementById('contenidoNotificacion').innerText = data.mensaje;
          const modal = new bootstrap.Modal(document.getElementById('modalNotificacion'));
          modal.show();
          document.getElementById('modalNotificacion').addEventListener('hidden.bs.modal', () => {
            db.ref(`usuarios/${uid}/notificacionRecarga/leido`).set(true);
          });
        }
      });

      // ✅ UID COPIABLE
      const uidTexto = document.createElement('p');
      uidTexto.innerHTML = `<strong>Tu UID:</strong> <code id="uidCopiable" style="cursor:pointer">${uid}</code>`;
      uidTexto.classList.add('text-info');
      document.querySelector('.text-center.mt-3').appendChild(uidTexto);

      setTimeout(() => {
        document.getElementById('uidCopiable').addEventListener('click', () => {
          navigator.clipboard.writeText(uid).then(() => {
            const msg = document.createElement('div');
            msg.innerText = "✅ UID copiado al portapapeles";
            msg.style.color = "#0f0";
            msg.style.fontSize = "0.9rem";
            msg.style.marginTop = "0.3rem";
            uidTexto.appendChild(msg);
            setTimeout(() => msg.remove(), 2000);
          });
        });
      }, 100);
    } else {
      window.location.href = "index.html";
    }
  });
      
    function toggleSidebar() {      
      document.getElementById('sidebar').classList.toggle('active');      
    }      
      
    function toggleMode() {
      const body = document.body;
      const icon = document.getElementById('modeIcon');
      const text = document.getElementById('modeText');
      body.classList.toggle('light-mode');
      if (body.classList.contains('light-mode')) {
        icon.classList.replace('fa-moon', 'fa-sun');
        icon.classList.replace('text-light', 'text-warning');
        text.textContent = 'Modo Claro';
      } else {
        icon.classList.replace('fa-sun', 'fa-moon');
        icon.classList.replace('text-warning', 'text-light');
        text.textContent = 'Modo Oscuro';
      }
    }
      
    // Ocultar loader      
    setTimeout(() => {      
      document.getElementById('loaderOverlay').style.display = 'none';      
    }, 10000); // 10 segundos      
      
    // Cerrar sesión después de 10 segundos
    setTimeout(() => {
      alert("Tu sesión ha expirado. Serás redirigido al login.");
      firebase.auth().signOut().then(() => {
        window.location.href = "login.html";
      });
    }, 10000); // 10 segundos     
        
        
window.addEventListener("load", function(){      
  window.cookieconsent.initialise({      
    palette: {      
      popup: { background: "#000" },      
      button: { background: "#f1d600" }      
    },      
    theme: "classic",      
    content: {      
      message: "Este sitio utiliza cookies para mejorar tu experiencia.",      
      dismiss: "Aceptar",      
      link: "Leer más",      
      href: "politica-cookies.html"      
    }      
  });      
});      
function cerrarSesion() {    
  firebase.auth().signOut().then(() => {    
    window.location.href = "login.html";    
  }).catch((error) => {    
    alert("Error al cerrar sesión: " + error.message);    
  });    
}    
const consultas = [    
  { nombre: "consulta dni", url: "api/consulta dni.html" },    
  { nombre: "Consulta por nombre", url: "api/consulta nombre.html" },    
  { nombre: "Tipo de cambio", url: "tipo_cambio.html" },    
  { nombre: "Generador de VPS", url: "creación de vps.html" },    
  { nombre: "Curso streaming", url: "curso.html" },    
  { nombre: "Yape fake", url: "Yape fake.html" },    
  { nombre: "Generador de servidores", url: "Generar servidores.html" },    
  { nombre: "Inicio", url: "index.html" }    
];    
    
document.getElementById("consultaInput").addEventListener("input", function () {    
  const filtro = this.value.toLowerCase();    
  const resultados = document.getElementById("resultadosBusqueda");    
  resultados.innerHTML = ""; // Limpiar resultados    
    
  if (filtro.length === 0) return;    
    
  const filtradas = consultas.filter(c => c.nombre.toLowerCase().includes(filtro));    
    
  if (filtradas.length === 0) {    
    resultados.innerHTML = '<div class="list-group-item bg-dark text-light">No hay coincidencias</div>';    
    return;    
  }    
    
  filtradas.forEach(c => {    
    const item = document.createElement("a");    
    item.href = c.url;    
    item.className = "list-group-item list-group-item-action bg-dark text-white";    
    item.textContent = c.nombre;    
    resultados.appendChild(item);    
  });    
});    

</script>      
</body>      
      </html>
      
